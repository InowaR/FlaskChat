<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<title>Список чатов</title>
		<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
	</head>
	<body>
		<div class="header">
			<form action="{{ url_for('get_home') }}" method="get">
			<input class="logo" type="submit" value="Главная страница">
			</form>
			<div class="header-right">
				<form action="{{ url_for('get_profile') }}" method="get">
				<input type="submit" value="Профиль">
				</form>
				<form action="{{ url_for('get_logout') }}" method="get">
				<input type="submit" value="Выйти">
				</form>
			</div>
		</div>
		<h1>Список найденных чатов</h1>
		<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
		<style>
			ul {
				height: 200px;
				width: 300px;
				overflow-y: scroll;
			}

			li {
				height: min-content;
				width: min-content;
				list-style: none;
				background-color: grey;
			}

			#find {
				width: 300px;
			}
		</style>
		<div id="find_chat">
			<input type="text" id="find" placeholder="Найти чат:">
			<ul id="list_find_chat"></ul>
		</div>
		<script>
			const socket = io();
			document.getElementById("find").addEventListener("keyup", function(event) {
				if (event.key == "Enter") {
					let data = document.getElementById("find").value;
					socket.emit("new_find_chat", data);
					document.getElementById("find").value = "";
				}
			})
			socket.on("list_find_chats", function(data) {
				let ul = document.getElementById("list_find_chat");
				let li = document.createElement("li");
				li.appendChild(document.createTextNode(data["answer"] + ": " + data["data"]));
				ul.appendChild(li);
			})
		</script>

	</body>
</html>