<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <title>Покер</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/game.css') }}">
        <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>
    <body class="body">
        <form action="{{ url_for('get_list_chats') }}" method="get">
            <input class="logo" type="submit" value="Главная">
        </form>
        <h2 id="login">{{ login }}</h2>
        <h2 id="game_id">{{ game_id }}</h2>
        <div class="area">
            <div class="table">
                <h2 class="player2">{{ player2 }}</h2>
                <h2 id="mes" class="message">{{ message }}</h2>
                <h2 class="player1">{{ player1 }}</h2>
                <div class="buttons">
                    <button type="submit" id="fold" onclick="fold();">Fold</button>
                    <button type="submit" id="check" onclick="check();">Check</button>
                    <button type="submit" id="raise" onclick="raise();">Raise</button>
                </div>
            </div>
        </div>
        <script>
            const socket = io();
            const login = $("#login").html();
            const game_id = $("#game_id").html();
            function fold() {
                let tuple = [game_id, login, 'fold'];
                socket.emit("get_button", tuple);
            }
            function check() {
                let tuple = [game_id, login, 'check'];
                socket.emit("get_button", tuple);
            }
            function raise() {
                let tuple = [game_id, login, 'raise'];
                socket.emit("get_button", tuple);
            }

<!--            socket.on("buttons", function(data) {-->
<!--                alert(data);-->
<!--            })-->

<!--            $(".logo").click(function() {-->
<!--                let answer = confirm("Вы действительно хотите покинуть игру?");-->
<!--                if (answer) {-->
<!--                    $(this).closest("form").submit();-->
<!--                } else {-->
<!--                    event.preventDefault();-->
<!--                }-->
<!--            });-->

<!--            $(document).ready(() => {-->
<!--                const tag = $("#mes");-->
<!--                setInterval(() => {-->
<!--                    const content = tag.html();-->
<!--                    if (content === "Ожидайте игру") {-->
<!--                        location.reload();-->
<!--                    }-->
<!--                }, 2000);-->
<!--            });-->

            $(document).ready(() => {
                setTimeout(() => {
                    const tag = $("#mes");
                    tag.html("");
                }, 4000);
            });
        </script>
    </body>
</html>